<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lær Klokka!</title>
    <style>
        body { font-family: 'Arial', sans-serif; text-align: center; background-color: #f0f8ff; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        h1 { color: #333; }
        canvas { background-color: white; border-radius: 50%; border: 5px solid #333; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .buttons { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; width: 100%; max-width: 400px; }
        button { padding: 15px; font-size: 18px; background-color: #4CAF50; color: white; border: none; border-radius: 8px; cursor: pointer; transition: 0.3s; }
        button:hover { background-color: #45a049; }
        #message { font-size: 24px; font-weight: bold; margin-top: 20px; height: 30px; color: #333; }
        .wrong { background-color: #f44336 !important; }
    </style>
</head>
<body>

    <h1>Hva er klokka?</h1>
    <canvas id="clockCanvas" width="300" height="300"></canvas>
    
    <div id="message"></div>
    
    <div class="buttons" id="buttonContainer">
        </div>

    <script>
        const canvas = document.getElementById("clockCanvas");
        const ctx = canvas.getContext("2d");
        const radius = canvas.height / 2;
        ctx.translate(radius, radius);
        const loopRadius = radius * 0.90;

        let currentHour, currentMinute;

        function drawClock() {
            drawFace(ctx, loopRadius);
            drawNumbers(ctx, loopRadius);
            drawTime(ctx, loopRadius);
        }

        function drawFace(ctx, radius) {
            ctx.beginPath();
            ctx.arc(0, 0, radius, 0, 2 * Math.PI);
            ctx.fillStyle = 'white';
            ctx.fill();
            ctx.beginPath();
            ctx.arc(0, 0, radius * 0.1, 0, 2 * Math.PI);
            ctx.fillStyle = '#333';
            ctx.fill();
        }

        function drawNumbers(ctx, radius) {
            ctx.font = radius * 0.15 + "px arial";
            ctx.textBaseline = "middle";
            ctx.textAlign = "center";
            for(let num = 1; num < 13; num++){
                let ang = num * Math.PI / 6;
                ctx.rotate(ang);
                ctx.translate(0, -radius * 0.85);
                ctx.rotate(-ang);
                ctx.fillText(num.toString(), 0, 0);
                ctx.rotate(ang);
                ctx.translate(0, radius * 0.85);
                ctx.rotate(-ang);
            }
        }

        function drawTime(ctx, radius){
            // Timeviser
            let hour = currentHour % 12;
            hour = (hour*Math.PI/6) + (currentMinute*Math.PI/(6*60));
            drawHand(ctx, hour, radius*0.5, radius*0.07, "#333");
            
            // Minuttviser
            let minute = (currentMinute*Math.PI/30);
            drawHand(ctx, minute, radius*0.8, radius*0.04, "red");
        }

        function drawHand(ctx, pos, length, width, color) {
            ctx.beginPath();
            ctx.lineWidth = width;
            ctx.lineCap = "round";
            ctx.strokeStyle = color;
            ctx.moveTo(0,0);
            ctx.rotate(pos);
            ctx.lineTo(0, -length);
            ctx.stroke();
            ctx.rotate(-pos);
        }

        function generateGame() {
            // Lag et tilfeldig tidspunkt (kun hele kvarter for å gjøre det enklere i starten)
            currentHour = Math.floor(Math.random() * 12) + 1;
            const minutesOptions = [0, 15, 30, 45];
            currentMinute = minutesOptions[Math.floor(Math.random() * minutesOptions.length)];

            drawClock();
            generateButtons();
            document.getElementById("message").innerText = "";
        }

        function formatTime(h, m) {
            let mStr = m === 0 ? "00" : m;
            return `${h}:${mStr}`;
        }

        function generateButtons() {
            const container = document.getElementById("buttonContainer");
            container.innerHTML = "";
            
            let correctAnswer = formatTime(currentHour, currentMinute);
            let options = [correctAnswer];

            while (options.length < 3) {
                let rH = Math.floor(Math.random() * 12) + 1;
                let rM = [0, 15, 30, 45][Math.floor(Math.random() * 4)];
                let wrongAnswer = formatTime(rH, rM);
                if (!options.includes(wrongAnswer)) {
                    options.push(wrongAnswer);
                }
            }

            // Bland rekkefølgen på knappene
            options.sort(() => Math.random() - 0.5);

            options.forEach(opt => {
                let btn = document.createElement("button");
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(opt, correctAnswer, btn);
                container.appendChild(btn);
            });
        }

        function checkAnswer(selected, correct, btnElement) {
            const msg = document.getElementById("message");
            if (selected === correct) {
                msg.innerText = "Riktig! Bra jobba!";
                msg.style.color = "green";
                setTimeout(generateGame, 1500); // Ny runde etter 1.5 sekund
            } else {
                msg.innerText = "Prøv igjen!";
                msg.style.color = "red";
                btnElement.classList.add("wrong");
            }
        }

        // Start spillet
        generateGame();
    </script>
</body>
</html>
